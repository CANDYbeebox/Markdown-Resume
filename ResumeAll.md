
- **阿里巴巴-业务平台事业部-核心交易流程-订购中台，2020.8~至今，当前职级：P6**
   
   订购平台上游对接淘宝服务市场等业务，下游对接支付渠道、结算平台、财务、账房等；为服务类业务提供下单、支付、退款、确认收货等能力。
    
   - 主要工作内容
      1. 承担业务项目的系分、开发、联调、上线工作;
      2. 负责系统稳定性建设，从0-1建设系统监控大盘；参与处理线上故障；
      3. 参与建设系统回归机制；记录子调用的入参出参，进行对比；debug可用天启
      4. 注重代码规范，负责应用小模块重构；命名，空格，分块，simpleDateFormat，线程池，stream，注释，pom


- **阿里巴巴-业务平台事业部-核心交易流程-支付中台，2019.6~2019.8，实习**

  支付平台分为收单支付+金融网络两大核心，为业务提供支付退款打款等能力，屏蔽渠道差异。

  - 主要工作内容
    1. 后台系统的审批流接入；
    2. 天猫海外台湾站支付会员建设；
    

- **应用启动优化**
  - 内存占用优化，节省60%内存；
  - 启动时间优化，360秒降低为260秒；

1. dump当前堆占用，找到内存瓶颈，39%
2. 分析代码：数据源63个，对应了63的sqlMapClient，每个sqlMapClient的mapperStatements、resultMap等重复创建
3. 修复方案：只用一个sqlMapClient去解析，别的都通过复制复用对象。

4. 打印bean的启动时间，耗时大的异步初始化
5. 找到启动进程，pid -17383
6. top -H -p 17383 找到运行时间长的线程 17394 = 0x43f2 
7. 打印进程堆栈，找到线程，发现线程wait在dbRegisterInstance
8. 串行init初始化时间久，改成并发，并将最耗时的tddl数据源放在第一个加入线程池

- **日志框架建设**
  - 统一系统摘要日志格式，用于统计分析、监控报警；基于摘要日志建设监控大盘；
  - 统一系统报文日志格式，输出接口完整入参和出参，用于排查问题；

1. 日志基本原则：隔离性、敏感性、可监控、可排查
2. AutoProxyCreator：getAdvicesAndAdvisor织入代理
3. 两个注解：@autoProxy注解，表示该类进行自动代理，并织入拦截器，@digest表示该方法进行打印
4. 拦截器不影响业务逻辑，try执行业务逻辑，finally打印日志也需要catch异常，不抛出只打印日志记录
5. 重构：1. 外部依赖，包装client类；2. spi接口增加一个类，统一代理所有spi

- **服务市场类资金合规项目**
  - 平台代收代付资金存在合规风险；因此接入网商云资金链路；
  - 订购域将支付能力下沉到支付域；
  - 订购域负责拆分退款金额和确收金额；

1. 后入先出退款，先入先出确收 2. 分布式锁控并发




